import{_ as k,r,o as b,c as f,a as v,b as e,p as o,t as a,s as h,C as N,g as y,h as q,H as I,j as E,y as T}from"./index-BdkSdCNj.js";const _={class:"zahlung-view"},w={class:"payment-container"},x={class:"payment-summary"},B={__name:"ZahlungView",setup(C){const m=T(),s=N(),l=r(null),u=r(s.query.ticketCount||0),i=r(s.query.fullName||""),c=r(s.query.totalPrice||0),p=async()=>{console.log("Lade Event mit ID:",s.query.eventId);try{const n=await y.get(`/event/${s.query.eventId}`);l.value=n.data,console.log("Geladene Event-Details:",l.value)}catch(n){console.error("Fehler beim Laden des Events:",n)}};b(()=>{s.query.eventId&&p()});const g=async()=>{try{const n={eventName:l.value.name,ticketCount:u.value,totalPrice:c.value,buyerName:i.value,buyerAddress:s.query.address,buyerHouseNumber:s.query.houseNumber},d=(await y.post("/ticketkauf",n)).data.orderId;console.log("Order ID:",d),m.push({name:"Rechnung",query:{orderId:d}})}catch(n){console.error("Fehler beim Speichern der Tickets:",n),alert("Fehler beim Ticketkauf. Bitte versuchen Sie es erneut.")}};return(n,t)=>(q(),f("div",_,[v(I,{title:"Zahlung"}),e("main",w,[t[5]||(t[5]=e("h1",null,"Zahlung",-1)),e("div",x,[t[4]||(t[4]=e("h2",null,[e("i",{class:"icon"},"ⓘ"),o(" Ticketkauf")],-1)),e("p",null,[t[0]||(t[0]=e("strong",null,"Event:",-1)),o(" "+a(h(s).query.eventName||"Nicht verfügbar"),1)]),e("p",null,[t[1]||(t[1]=e("strong",null,"Anzahl Tickets:",-1)),o(" "+a(u.value),1)]),e("p",null,[t[2]||(t[2]=e("strong",null,"Name:",-1)),o(" "+a(i.value),1)]),e("p",null,[t[3]||(t[3]=e("strong",null,"Preis:",-1)),o(" "+a(c.value)+" €",1)]),e("button",{class:"buy-button",onClick:g},"Buy")])]),v(E)]))}},F=k(B,[["__scopeId","data-v-1523d52d"]]);export{F as default};
